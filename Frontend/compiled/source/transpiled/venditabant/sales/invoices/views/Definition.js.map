{
  "version": 3,
  "sources": [
    "/home/jan/Project/Venditabant/Frontend/source/class/venditabant/sales/invoices/views/Definition.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "venditabant",
    "application",
    "base",
    "views",
    "Base",
    "include",
    "locale",
    "MTranslation",
    "construct",
    "destruct",
    "properties",
    "support",
    "nullable",
    "check",
    "members",
    "setParams",
    "params",
    "getView",
    "view",
    "ui",
    "container",
    "Composite",
    "layout",
    "Canvas",
    "setBackgroundColor",
    "Stack",
    "setDecorator",
    "_container",
    "invoicelist",
    "sales",
    "invoices",
    "InvoiceList",
    "set",
    "isSupport",
    "callback",
    "_invoicelist",
    "add",
    "top",
    "left",
    "right",
    "height",
    "saveStockitem",
    "stockitem",
    "_stockitem",
    "getValue",
    "description",
    "_description",
    "price",
    "_price",
    "purchaseprice",
    "_purchaseprice",
    "active",
    "_active",
    "stocked",
    "_stocked",
    "date",
    "Date",
    "today",
    "getFullYear",
    "getMonth",
    "getDate",
    "fiveyears",
    "data",
    "fromdate",
    "todate",
    "com",
    "communication",
    "Post",
    "send",
    "_address",
    "success",
    "win",
    "loadStockitems",
    "alert",
    "tr",
    "_createInvTable",
    "rowData",
    "that",
    "tableModel",
    "table",
    "model",
    "Simple",
    "setColumns",
    "setData",
    "Table",
    "width",
    "getSelectionModel",
    "setSelectionMode",
    "selection",
    "Model",
    "SINGLE_SELECTION",
    "addListener",
    "e",
    "selectionModel",
    "getTarget",
    "selectedRows",
    "iterateSelection",
    "index",
    "push",
    "getTableModel",
    "getRowData",
    "tcm",
    "getTableColumnModel",
    "_invtable",
    "stockitems",
    "stock",
    "models",
    "Stockitem",
    "loadList",
    "response",
    "tableData",
    "i",
    "length",
    "stockitems_pkey",
    "_table",
    "Definition"
  ],
  "mappings": "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",
  "sourcesContent": [
    "\nqx.Class.define ( \"venditabant.sales.invoices.views.Definition\",\n    {\n        extend: venditabant.application.base.views.Base,\n        include:[qx.locale.MTranslation],\n        construct: function () {\n        },\n        destruct: function () {\n        },\n        properties : {\n            support : { nullable : true, check: \"Boolean\" }\n        },\n        members: {\n            // Public functions ...\n\n            setParams: function (params) {\n            },\n            getView: function () {\n                let view = new qx.ui.container.Composite(new qx.ui.layout.Canvas());\n                view.setBackgroundColor(\"white\");\n\n                /*var box = new qx.ui.container.Composite();\n                box.setLayout(new qx.ui.layout.HBox(10));\n                win.add(box, {flex: 1});*/\n                var container = new qx.ui.container.Stack();\n                container.setDecorator(\"main\");\n                this._container = container;\n\n                let invoicelist = new venditabant.sales.invoices.views.InvoiceList().set({\n                    support:this.isSupport(),\n                    callback:this,\n                });\n                this._invoicelist = invoicelist;\n                container.add(this._invoicelist.getView());\n                // Add a TabView\n\n                view.add(container, {top:5, left:5, right:5,height:\"95%\"});\n                return view;\n\n            },\n            saveStockitem:function() {\n                let stockitem = this._stockitem.getValue();\n                let description  = this._description.getValue();\n                let price  = this._price.getValue();\n                let purchaseprice  = this._purchaseprice.getValue();\n                let active  = this._active.getValue();\n                let stocked  = this._stocked.getValue();\n\n                var date = new Date();\n                var today = date.getFullYear()+'-'+(date.getMonth()+1)+'-'+date.getDate();\n                var fiveyears = (date.getFullYear()+5)+'-'+(date.getMonth()+1)+'-'+date.getDate();\n\n                let data = {\n                    stockitem: stockitem,\n                    description: description,\n                    price:price,\n                    purchaseprice:purchaseprice,\n                    active:active,\n                    stocked:stocked,\n                    fromdate: today,\n                    todate:fiveyears\n                }\n                let com = new venditabant.communication.Post ( );\n                com.send ( this._address, \"/api/v1/stockitem/save/\", data, function ( success ) {\n                    let win = null;\n                    if ( success )  {\n                        this.loadStockitems();\n                        alert(\"Saved item successfully\");\n                    }\n                    else  {\n                        alert ( this.tr ( 'success' ) );\n                    }\n                }, this );\n\n            },\n            _createInvTable : function() {\n                // Create the initial data\n                let rowData =  '';\n                let that = this;\n\n                // table model\n                var tableModel = new qx.ui.table.model.Simple();\n                tableModel.setColumns([ \"ID\", \"Customer\", \"Orderno\", \"Order date\",\"Delivery date\",\"Open\" ]);\n                tableModel.setData(rowData);\n                // table\n                var table = new qx.ui.table.Table(tableModel);\n\n                table.set({\n                    width: 800,\n                    height: 345\n                });\n\n                table.getSelectionModel().setSelectionMode(qx.ui.table.selection.Model.SINGLE_SELECTION);\n                table.getSelectionModel().addListener('changeSelection', function(e){\n                    var selectionModel = e.getTarget();\n                    var selectedRows = [];\n                    selectionModel.iterateSelection(function(index) {\n                        selectedRows.push(table.getTableModel().getRowData(index));\n                    });\n\n                });\n                var tcm = table.getTableColumnModel();\n\n                this._invtable = table;\n            },\n            loadStockitems:function () {\n                let stockitems = new venditabant.stock.stockitems.models.Stockitem();\n                stockitems.loadList(function(response) {\n                    let tableData = [];\n                    for(let i = 0; i < response.data.length; i++) {\n                        let active = response.data[i].active ? true : false;\n                        let stocked = response.data[i].stocked ? true : false;\n                        tableData.push([\n                            response.data[i].stockitems_pkey,\n                            response.data[i].stockitem,\n                            response.data[i].description,\n                            response.data[i].price,\n                            response.data[i].purchaseprice,\n                            active,\n                            stocked,\n                            ]);\n                    }\n                    this._table.getTableModel().setData(tableData);\n                    //alert(\"Set table data here\");\n                }, this);\n                //return ;//list;\n            },\n        }\n    });\n"
  ]
}